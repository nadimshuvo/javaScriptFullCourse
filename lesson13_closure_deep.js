// লেসন ১৩ (গভীর আলোচনা): ক্লোজার (Closures) কী এবং কেন?

/**
 * ক্লোজার বোঝার জন্য একটি বাস্তব উদাহরণ কল্পনা করুন:
 * মনে করুন আপনার বাবা আপনাকে একটি জাদুকরী বাক্স (Box) দিয়েছেন। 
 * বাক্সের ভেতরে কিছু চকোলেট আছে। 
 * বাবা যখন চলে যান, বাক্সটি আপনার কাছেই থাকে। 
 * এখন বাবা কাছে না থাকলেও আপনি বাক্সটি খুলে চকোলেট খেতে পারেন। 
 * 
 * এখানে:
 * ১. বাবা = বাইরের ফাংশন (Outer Function)
 * ২. আপনি = ভেতরের ফাংশন (Inner Function)
 * ৩. জাদুকরী বাক্স = ক্লোজার (Closure) - যা বাইরের ফাংশন শেষ হওয়ার পরও ডাটা মনে রাখে।
 */

function stopWatch() {
    let seconds = 0; // এটি বাইরের ফাংশনের ভেরিয়েবল

    // আমরা একটি ভেতরের ফাংশন রিটার্ন করছি
    return function() {
        seconds++;
        return `সময় অতিবাহিত: ${seconds} সেকেন্ড`;
    };
}

/**
 * কেন এটি গুরুত্বপূর্ণ?
 * ১. এখানে 'seconds' ভেরিয়েবলটি বাইরের কেউ সরাসরি পরিবর্তন করতে পারবে না। 
 * ২. শুধুমাত্র ভেতরের ফাংশনটিই এটি এক্সেস করতে পারবে। 
 * ৩. একে বলে ডাটা প্রাইভেসি (Data Privacy)।
 */

console.log("১. স্টপওয়াচ ১ শুরু করছি:");
const clock1 = stopWatch();
console.log(clock1()); // সময় অতিবাহিত: 1 সেকেন্ড
console.log(clock1()); // সময় অতিবাহিত: 2 সেকেন্ড

console.log("\n২. স্টপওয়াচ ২ শুরু করছি (এটি সম্পূর্ণ আলাদা):");
const clock2 = stopWatch();
console.log(clock2()); // সময় অতিবাহিত: 1 সেকেন্ড (সে নিজের আলাদা 'seconds' মনে রেখেছে)

console.log("\n৩. স্টপওয়াচ ১ আবার চেক করি:");
console.log(clock1()); // সময় অতিবাহিত: 3 সেকেন্ড (সে তার আগের ২ মনে রেখেছে!)

/**
 * সারসংক্ষেপ:
 * ক্লোজার হলো একটি ফাংশন এবং তার চারপাশের পরিবেশের (Lexical Environment) সমষ্টি। 
 * যখনই একটি ফাংশন তার বাইরের কোনো ভেরিয়েবলকে ব্যবহার করে, তখনই সেখানে একটি ক্লোজার তৈরি হয়।
 */
